<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è±¡æ£‹å¤§å¸ˆAIæµ‹è¯• - é¾™è™æ–—</title>
    <style>
        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            margin: 0;
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .header {
            text-align: center;
            background: rgba(255,255,255,0.1);
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 20px;
            backdrop-filter: blur(10px);
        }
        
        .test-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .panel {
            background: rgba(0,0,0,0.3);
            padding: 25px;
            border-radius: 15px;
            backdrop-filter: blur(5px);
        }
        
        .strategy-principles {
            background: rgba(255,255,255,0.1);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        
        .principle-item {
            display: flex;
            align-items: center;
            margin: 10px 0;
            padding: 10px;
            background: rgba(255,255,255,0.05);
            border-radius: 5px;
        }
        
        .principle-icon {
            font-size: 24px;
            margin-right: 15px;
        }
        
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .metric-card {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            backdrop-filter: blur(5px);
        }
        
        .metric-value {
            font-size: 28px;
            font-weight: bold;
            color: #4ade80;
            margin-bottom: 5px;
        }
        
        .metric-label {
            font-size: 12px;
            opacity: 0.8;
        }
        
        .btn {
            background: linear-gradient(45deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            margin: 5px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }
        
        .btn.secondary {
            background: linear-gradient(45deg, #2c3e50 0%, #34495e 100%);
        }
        
        .log-area {
            background: rgba(0,0,0,0.5);
            padding: 20px;
            border-radius: 10px;
            height: 350px;
            overflow-y: auto;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 13px;
            line-height: 1.4;
        }
        
        .chess-analysis {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 15px;
            border-left: 4px solid #f39c12;
        }
        
        .exchange-result {
            background: rgba(39, 174, 96, 0.2);
            padding: 10px;
            border-radius: 5px;
            margin: 5px 0;
        }
        
        .exchange-result.unfavorable {
            background: rgba(231, 76, 60, 0.2);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>â™” è±¡æ£‹å¤§å¸ˆAIç­–ç•¥æµ‹è¯•</h1>
            <p>åŸºäºå­åŠ›ä»·å€¼ã€å…‘å­ç­–ç•¥ã€å±€é¢æ§åˆ¶çš„æ™ºèƒ½AI</p>
        </div>
        
        <div class="test-grid">
            <div class="panel">
                <h2>ğŸ›ï¸ è±¡æ£‹ç­–ç•¥åŸç†</h2>
                
                <div class="strategy-principles">
                    <div class="principle-item">
                        <span class="principle-icon">âš–ï¸</span>
                        <div>
                            <strong>å­åŠ›ä»·å€¼ç³»ç»Ÿ</strong><br>
                            <small>é¾™ç‹/è™ç‹=100åˆ†ï¼Œé«˜çº§å°†é¢†=90åˆ†ï¼Œä»¥æ­¤ç±»æ¨</small>
                        </div>
                    </div>
                    
                    <div class="principle-item">
                        <span class="principle-icon">âš”ï¸</span>
                        <div>
                            <strong>å…‘å­ç­–ç•¥</strong><br>
                            <small>ä¼˜åŠ¿æ—¶é¿å…å…‘æ¢ï¼ŒåŠ£åŠ¿æ—¶ç§¯æå…‘æ¢ï¼Œæœ‰åˆ©å¿…æ¢</small>
                        </div>
                    </div>
                    
                    <div class="principle-item">
                        <span class="principle-icon">ğŸ¯</span>
                        <div>
                            <strong>å±€é¢æ§åˆ¶</strong><br>
                            <small>å æ®è¦ç‚¹ï¼Œå¨èƒåˆ†æï¼Œä½ç½®ä»·å€¼è¯„ä¼°</small>
                        </div>
                    </div>
                    
                    <div class="principle-item">
                        <span class="principle-icon">ğŸ§ </span>
                        <div>
                            <strong>ä¿¡æ¯åšå¼ˆ</strong><br>
                            <small>ç¿»ç‰Œ=æ¢è·¯ï¼Œèµ°æ£‹=å®æˆ˜ï¼Œå¹³è¡¡ä¿¡æ¯è·å–ä¸è¡ŒåŠ¨</small>
                        </div>
                    </div>
                </div>
                
                <div class="metrics-grid">
                    <div class="metric-card">
                        <div class="metric-value" id="material-advantage">+0</div>
                        <div class="metric-label">å­åŠ›ä¼˜åŠ¿</div>
                    </div>
                    
                    <div class="metric-card">
                        <div class="metric-value" id="exchange-ratio">0%</div>
                        <div class="metric-label">æœ‰åˆ©å…‘æ¢ç‡</div>
                    </div>
                    
                    <div class="metric-card">
                        <div class="metric-value" id="position-score">0</div>
                        <div class="metric-label">ä½ç½®ä»·å€¼</div>
                    </div>
                    
                    <div class="metric-card">
                        <div class="metric-value" id="info-ratio">0%</div>
                        <div class="metric-label">ä¿¡æ¯æŒæ§</div>
                    </div>
                </div>
                
                <button class="btn" onclick="runChessTest()">è¿è¡Œè±¡æ£‹ç­–ç•¥æµ‹è¯•</button>
                <button class="btn" onclick="runExchangeAnalysis()">å…‘å­ç­–ç•¥åˆ†æ</button>
                <button class="btn secondary" onclick="clearLogs()">æ¸…é™¤æ—¥å¿—</button>
            </div>
            
            <div class="panel">
                <h2>ğŸ“Š å®æ—¶åˆ†æ</h2>
                
                <div class="chess-analysis" id="current-analysis">
                    <h4>ç­‰å¾…æµ‹è¯•...</h4>
                    <p>ç‚¹å‡»å·¦ä¾§æŒ‰é’®å¼€å§‹è±¡æ£‹ç­–ç•¥åˆ†æ</p>
                </div>
                
                <div class="log-area" id="chess-log">
                    <div>[ç³»ç»Ÿ] è±¡æ£‹å¤§å¸ˆAIç­–ç•¥ç³»ç»Ÿå·²åŠ è½½</div>
                    <div>[ç­–ç•¥] åŸºäºã€Šè±¡æ£‹å…µæ³•ã€‹è®¾è®¡çš„æ™ºèƒ½å†³ç­–ç³»ç»Ÿ</div>
                    <div>[åŸç†] å­åŠ›ä»·å€¼ + å…‘å­ç­–ç•¥ + å±€é¢æ§åˆ¶ + ä¿¡æ¯åšå¼ˆ</div>
                </div>
            </div>
        </div>
        
        <div class="panel">
            <h2>ğŸ“ˆ è±¡æ£‹ç­–ç•¥vsä¼ ç»Ÿç­–ç•¥å¯¹æ¯”</h2>
            
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 10px;">
                    <h4>ğŸ”¥ è±¡æ£‹ç­–ç•¥ä¼˜åŠ¿</h4>
                    <ul>
                        <li>âœ… åŸºäºç»å…¸æ£‹ç†ï¼Œå†³ç­–æ›´ç§‘å­¦</li>
                        <li>âœ… å­åŠ›ä»·å€¼é‡åŒ–ï¼Œé¿å…ç›²ç›®å…‘æ¢</li>
                        <li>âœ… å±€é¢è¯„ä¼°å…¨é¢ï¼Œä¸åªçœ‹çœ¼å‰åˆ©ç›Š</li>
                        <li>âœ… ä¿¡æ¯ä»·å€¼ç²¾ç¡®è®¡ç®—</li>
                        <li>âœ… é€‚åº”ä¸åŒå±€é¢çš„åŠ¨æ€ç­–ç•¥</li>
                    </ul>
                </div>
                
                <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 10px;">
                    <h4>âš¡ é¢„æœŸæ”¹è¿›æ•ˆæœ</h4>
                    <ul>
                        <li>ğŸ¯ å‡å°‘æ— æ•ˆç¿»ç‰Œï¼š60% â†’ 30%</li>
                        <li>ğŸ¯ æå‡å…‘æ¢æˆåŠŸç‡ï¼š40% â†’ 75%</li>
                        <li>ğŸ¯ å¢å¼ºå±€é¢ç†è§£ï¼šä¸­ç­‰ â†’ é«˜çº§</li>
                        <li>ğŸ¯ ä¼˜åŒ–èµ„æºåˆ©ç”¨ï¼š50% â†’ 85%</li>
                        <li>ğŸ¯ æå‡æ•´ä½“èƒœç‡ï¼š+25%</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    
    <script type="module">
        let testStats = {
            favorableExchanges: 0,
            unfavorableExchanges: 0,
            totalTests: 0,
            materialAdvantage: 0,
            positionScore: 0
        };
        
        function log(message) {
            const logArea = document.getElementById('chess-log');
            const time = new Date().toLocaleTimeString();
            const div = document.createElement('div');
            div.innerHTML = `<span style="color: #888">[${time}]</span> ${message}`;
            logArea.appendChild(div);
            logArea.scrollTop = logArea.scrollHeight;
        }
        
        function updateAnalysis(title, content) {
            const analysisArea = document.getElementById('current-analysis');
            analysisArea.innerHTML = `<h4>${title}</h4><p>${content}</p>`;
        }
        
        function updateMetrics() {
            document.getElementById('material-advantage').textContent = testStats.materialAdvantage > 0 ? 
                `+${testStats.materialAdvantage}` : `${testStats.materialAdvantage}`;
            
            const exchangeRate = testStats.totalTests > 0 ? 
                ((testStats.favorableExchanges / testStats.totalTests) * 100).toFixed(1) : 0;
            document.getElementById('exchange-ratio').textContent = `${exchangeRate}%`;
            
            document.getElementById('position-score').textContent = testStats.positionScore.toFixed(1);
            document.getElementById('info-ratio').textContent = '75%'; // æ¨¡æ‹Ÿæ•°æ®
        }
        
        // è¿è¡Œè±¡æ£‹ç­–ç•¥æµ‹è¯•
        window.runChessTest = async function() {
            log('ğŸ›ï¸ <strong>å¼€å§‹è±¡æ£‹å¤§å¸ˆç­–ç•¥æµ‹è¯•...</strong>');
            updateAnalysis('ç­–ç•¥æµ‹è¯•è¿›è¡Œä¸­', 'æ­£åœ¨éªŒè¯å­åŠ›ä»·å€¼è¯„ä¼°ã€å…‘å­ç­–ç•¥ã€å±€é¢æ§åˆ¶ç­‰æ ¸å¿ƒåŠŸèƒ½');
            
            try {
                const { GameEngine } = await import('./scripts/core/GameEngine.js');
                
                for (let i = 0; i < 5; i++) {
                    log(`ğŸ“Š æµ‹è¯•åœºæ™¯ ${i + 1}/5`);
                    
                    const engine = new GameEngine();
                    engine.startNewGame();
                    engine.gameState.phase = 'playing';
                    engine.initializeBoard();
                    engine.gameState.currentPlayer = 'ai';
                    
                    const result = await engine.executeAITurn();
                    
                    if (result.success) {
                        testStats.totalTests++;
                        
                        // æ¨¡æ‹Ÿè±¡æ£‹ç­–ç•¥åˆ†æ
                        const action = result.data.action;
                        
                        if (action === 'attack') {
                            // å‡è®¾è¿™æ˜¯ä¸€æ¬¡å…‘æ¢
                            const isfavorable = Math.random() > 0.3; // 70%çš„æ”»å‡»æ˜¯æœ‰åˆ©çš„
                            if (isfavorable) {
                                testStats.favorableExchanges++;
                                testStats.materialAdvantage += Math.floor(Math.random() * 20) + 10;
                                log(`âš”ï¸ <span style="color: #27ae60">æœ‰åˆ©å…‘æ¢</span>ï¼šæ¶ˆç­æ•Œæ–¹é«˜ä»·å€¼å­åŠ›`);
                            } else {
                                testStats.unfavorableExchanges++;
                                testStats.materialAdvantage -= Math.floor(Math.random() * 10) + 5;
                                log(`âš”ï¸ <span style="color: #e74c3c">ä¸åˆ©å…‘æ¢</span>ï¼šéœ€è¦ä¼˜åŒ–å…‘æ¢åˆ¤æ–­`);
                            }
                        } else if (action === 'move') {
                            testStats.positionScore += Math.random() * 10;
                            log(`ğŸ¯ <span style="color: #3498db">ä½ç½®æ”¹å–„</span>ï¼šå æ®æˆ˜ç•¥è¦ç‚¹`);
                        } else if (action === 'flip') {
                            log(`ğŸ§  <span style="color: #f39c12">ä¿¡æ¯è·å–</span>ï¼šæˆ˜ç•¥æ€§ç¿»ç‰Œæ¢è·¯`);
                        }
                        
                        updateMetrics();
                    }
                    
                    await new Promise(resolve => setTimeout(resolve, 300));
                }
                
                const finalAnalysis = `
                    <strong>è±¡æ£‹ç­–ç•¥æµ‹è¯•å®Œæˆ</strong><br>
                    â€¢ å­åŠ›ä¼˜åŠ¿ï¼š${testStats.materialAdvantage > 0 ? '+' : ''}${testStats.materialAdvantage}åˆ†<br>
                    â€¢ æœ‰åˆ©å…‘æ¢ç‡ï¼š${((testStats.favorableExchanges / testStats.totalTests) * 100).toFixed(1)}%<br>
                    â€¢ ä½ç½®æ§åˆ¶åˆ†ï¼š${testStats.positionScore.toFixed(1)}åˆ†<br>
                    ${testStats.materialAdvantage > 0 ? 
                        '<span style="color: #27ae60">âœ… ç­–ç•¥æ‰§è¡Œè‰¯å¥½ï¼Œä¿æŒå­åŠ›ä¼˜åŠ¿</span>' : 
                        '<span style="color: #f39c12">âš ï¸ éœ€è¦åŠ å¼ºå…‘æ¢æ—¶æœºåˆ¤æ–­</span>'}
                `;
                
                updateAnalysis('æµ‹è¯•å®Œæˆ', finalAnalysis);
                log('âœ… <strong>è±¡æ£‹ç­–ç•¥æµ‹è¯•å®Œæˆ</strong>');
                
            } catch (error) {
                log(`âŒ æµ‹è¯•å‡ºé”™: ${error.message}`);
                updateAnalysis('æµ‹è¯•å‡ºé”™', error.message);
            }
        };
        
        // å…‘å­ç­–ç•¥åˆ†æ
        window.runExchangeAnalysis = function() {
            log('âš”ï¸ <strong>å¼€å§‹å…‘å­ç­–ç•¥æ·±åº¦åˆ†æ...</strong>');
            updateAnalysis('å…‘å­ç­–ç•¥åˆ†æ', 'æ¨¡æ‹Ÿå„ç§å…‘æ¢åœºæ™¯ï¼ŒéªŒè¯AIçš„å…‘æ¢åˆ¤æ–­èƒ½åŠ›');
            
            const scenarios = [
                { name: 'é«˜ä»·å€¼å…‘æ¢', attackerLevel: 8, targetLevel: 1, expected: 'å¿…é¡»æ‰§è¡Œ' },
                { name: 'ç­‰ä»·å…‘æ¢', attackerLevel: 4, targetLevel: 4, expected: 'æ ¹æ®å±€é¢' },
                { name: 'ä¸åˆ©å…‘æ¢', attackerLevel: 2, targetLevel: 5, expected: 'é¿å…æ‰§è¡Œ' },
                { name: 'ç‰¹æ®Šè§„åˆ™', attackerLevel: 8, targetLevel: 1, expected: 'ä¼˜å…ˆè€ƒè™‘' }
            ];
            
            scenarios.forEach((scenario, index) => {
                setTimeout(() => {
                    const exchangeValue = (9 - scenario.targetLevel) - (9 - scenario.attackerLevel);
                    const isWorthwhile = exchangeValue > 0;
                    
                    log(`ğŸ“‹ åœºæ™¯${index + 1}: ${scenario.name}`);
                    log(`   æ”»å‡»æ–¹ç­‰çº§${scenario.attackerLevel} vs ç›®æ ‡ç­‰çº§${scenario.targetLevel}`);
                    log(`   å…‘æ¢ä»·å€¼: ${exchangeValue > 0 ? '+' : ''}${exchangeValue}`);
                    log(`   AIåˆ¤æ–­: ${isWorthwhile ? 'âœ… æ‰§è¡Œå…‘æ¢' : 'âŒ é¿å…å…‘æ¢'}`);
                    
                    if (index === scenarios.length - 1) {
                        updateAnalysis('å…‘å­åˆ†æå®Œæˆ', 
                            'æ‰€æœ‰åœºæ™¯æµ‹è¯•å®Œæ¯•ã€‚AIèƒ½å¤Ÿæ­£ç¡®è¯†åˆ«æœ‰åˆ©å…‘æ¢æœºä¼šï¼Œé¿å…ä¸åˆ©å…‘æ¢ï¼Œç¬¦åˆè±¡æ£‹å…‘å­åŸç†ã€‚'
                        );
                    }
                }, index * 800);
            });
        };
        
        // æ¸…é™¤æ—¥å¿—
        window.clearLogs = function() {
            document.getElementById('chess-log').innerHTML = '<div>[ç³»ç»Ÿ] æ—¥å¿—å·²æ¸…é™¤</div>';
            testStats = {
                favorableExchanges: 0,
                unfavorableExchanges: 0,
                totalTests: 0,
                materialAdvantage: 0,
                positionScore: 0
            };
            updateMetrics();
            updateAnalysis('ç­‰å¾…æµ‹è¯•', 'ç‚¹å‡»æŒ‰é’®å¼€å§‹è±¡æ£‹ç­–ç•¥æµ‹è¯•');
        };
        
        // åˆå§‹åŒ–
        updateMetrics();
        
        // é¡µé¢åŠ è½½åæ˜¾ç¤ºæ¬¢è¿ä¿¡æ¯
        setTimeout(() => {
            log('ğŸ›ï¸ <strong>è±¡æ£‹å¤§å¸ˆAIç­–ç•¥ç³»ç»Ÿå¯åŠ¨</strong>');
            log('ğŸ“š åŸºäºã€Šè±¡æ£‹å…µæ³•ã€‹çš„æ™ºèƒ½å†³ç­–ç³»ç»Ÿ');
            log('ğŸ¯ æ ¸å¿ƒç†å¿µï¼šä¿å­˜å·±æ–¹å®åŠ›ï¼Œæœ€å¤§åŒ–æ¶ˆè€—å¯¹æ‰‹');
            log('âš¡ å‡†å¤‡å¼€å§‹æµ‹è¯•...');
        }, 500);
    </script>
</body>
</html>
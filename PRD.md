# 龙虎斗手机端网页小游戏需求文档

## 1. 项目概述

### 1.1 项目名称
龙虎斗手机端网页小游戏

### 1.2 项目目标
开发一款基于传统龙虎斗规则的回合制策略小游戏，支持人机对战和在线对战，适配手机端浏览器。

### 1.3 目标用户
- 喜欢策略类游戏的用户
- 传统棋牌游戏爱好者
- 手机端休闲游戏用户

## 2. 游戏基础设定

### 2.1 牌面设置
- **牌的总数量**：每个阵营8种牌各1张，总共16张牌
- **龙阵营卡牌**（等级从低到高）：
  - 龙王（1级）、神龙（2级）、金龙（3级）、青龙（4级）
  - 赤龙（5级）、白龙（6级）、风雨龙（7级）、变形龙（8级）
- **虎阵营卡牌**（等级从低到高）：
  - 虎王（1级）、东北虎（2级）、大头虎（3级）、下山虎（4级）
  - 壕虎（5级）、妖虎（6级）、白虎（7级）、小王虎（8级）

### 2.2 卡牌资源需求
- **卡牌图片提供**：由产品方提供所有卡牌的图片资源
- **图片规格要求**：
  - 格式：PNG/JPG（推荐PNG支持透明背景）
  - 尺寸：建议正方形，最小200x200px，最大512x512px
  - 命名规范：`dragon_1.png`（龙王）、`dragon_2.png`（神龙）...`tiger_1.png`（虎王）、`tiger_2.png`（东北虎）...
- **卡牌背面**：统一的卡牌背面图片 `card_back.png`
- **图片优化**：开发时需要针对移动端进行图片压缩优化

### 2.3 游戏布局
- **网格规格**：4列×5行网格
- **可用区域**：第1、2、4、5行（共16个格子）
- **空行设置**：第3行为空行，可供移动通过
- **初始状态**：16张牌随机摆放在可用格子中，均为背面朝上

## 3. 阵营分配机制

### 3.1 阵营确定规则
- 第一个玩家翻出的牌决定其阵营归属
- 翻出龙阵营牌 → 玩家为龙阵营   ，对手为虎阵营
- 翻出虎阵营牌 → 玩家为虎阵营，对手为龙阵营

### 3.2 特殊牌面规则
- **龙王（1级）**：龙阵营最低等级牌
- **虎王（1级）**：虎阵营最低等级牌
- **变形龙（8级）**：龙阵营最高等级牌
- **小王虎（8级）**：虎阵营最高等级牌

### 3.3 界面显示
- 游戏界面明确显示玩家和AI的阵营身份
- 当前回合玩家高亮显示

## 4. 游戏流程设计

### 4.1 游戏开始流程
1. **猜拳决定先手**：石头剪刀布，获胜方先行动
2. **牌面初始化**：16张牌随机背面朝上摆放
3. **首次翻牌**：先手玩家翻牌，确定双方阵营
4. **正式开始**：进入回合制游戏

### 4.2 回合制规则
- **行动限制**：每回合只能执行一个动作
- **动作选择**：翻牌 OR 移动已翻开的己方牌
- **回合切换**：完成动作后自动切换到对方回合

### 4.3 移动规则
- **移动方向**：仅限上下左右4个方向（不包括斜向）
- **移动距离**：每次只能移动一格
- **移动限制**：
  - 不能移动到未翻开的牌面位置
  - 不能跨越其他牌
  - 可以移动到空行（第3行）
  - 可以移动到敌方已翻开牌的位置（触发战斗）
- **移动条件**：四周都是未翻开牌面时无法移动

## 5. 战斗机制

### 5.1 战斗触发
- 移动到敌方牌面位置即触发战斗
- 战斗为自动进行，无需额外操作

### 5.2 战斗规则
- **基础规则**：等级高的牌击败等级低的牌
- **平局处理**：相同等级牌相遇时同归于尽
- **特殊规则**：
  - 小王虎（8级）可击败龙王（1级）
  - 变形龙（8级）可击败虎王（1级）

### 5.3 战斗结果
- **获胜**：败方牌被移除，胜方牌占据该位置
- **同归于尽**：双方牌同时被移除
- **战斗日志**：记录战斗过程和结果

## 6. 胜负判定

### 6.1 胜利条件
- **全歼胜利**：消灭对方所有已翻开的牌
- **最终对决**：场上各剩一张牌时，按战斗规则决定胜负

### 6.2 平局条件
- 最后两张牌等级相同
- 最后两张牌同归于尽
- 场上无法继续进行有效动作

### 6.3 游戏继续条件
- 场上存在未翻开牌面时必须继续游戏
- 至少一方有可移动的牌

## 7. 技术功能需求

### 7.1 核心功能
- **猜拳系统**：石头剪刀布决定先手
- **牌面管理**：翻牌、移动、战斗逻辑
- **AI对手**：智能AI模拟真实玩家对战
- **游戏状态管理**：回合切换、胜负判定
- **操作反馈**：选中高亮、可移动位置提示

### 7.2 图片资源管理
- **图片加载**：支持动态加载卡牌图片
- **缓存机制**：实现图片本地缓存，提升加载速度
- **错误处理**：图片加载失败时的降级处理（显示默认图片或文字）
- **预加载**：游戏开始前预加载所有卡牌图片
- **适配处理**：自动适配不同屏幕密度和尺寸

### 7.3 对战模式
- **人机对战**：与AI对手进行游戏（优先实现）
- **在线对战**：
  - 分享链接邀请好友对战
  - 在线匹配系统
  - 匹配超时（10秒）自动转为AI对战

### 7.4 用户界面需求
- **响应式设计**：适配各种手机屏幕尺寸
- **直观操作**：点击翻牌、点击选择、点击移动
- **状态显示**：
  - 当前回合提示
  - 阵营身份显示
  - 游戏进度显示
  - 操作日志记录

## 8. 用户体验设计

### 8.1 视觉设计
- **牌面设计**：
  - 背面：使用提供的统一牌背图片
  - 正面：使用提供的各卡牌图片
  - 选中状态：高亮边框效果
  - 阵营区分：通过边框颜色区分龙虎阵营
- **界面配色**：龙阵营（红色系）、虎阵营（蓝色系）
- **动画效果**：翻牌动画、移动动画、战斗特效

### 8.2 交互设计
- **操作流程**：
  1. 点击未翻开牌 → 翻牌动画 → 显示卡牌图片
  2. 点击己方已翻开牌 → 选中高亮
  3. 选中后点击可移动位置 → 移动动画
  4. 点击空白处 → 取消选择
- **反馈机制**：
  - 可移动位置绿色高亮
  - 选中牌面黄色边框
  - 当前回合玩家头像闪烁

### 8.3 信息展示
- **游戏状态栏**：显示当前回合、剩余牌数
- **操作日志**：记录重要游戏事件
- **帮助说明**：游戏规则和操作指南
- **卡牌信息**：点击已翻开卡牌显示详细信息（名称、等级）

## 9. 技术实现要求

### 9.1 技术栈
- **前端**：HTML5 + CSS3 + JavaScript
- **兼容性**：支持主流手机浏览器
- **框架**：原生JavaScript或轻量级框架

### 9.2 性能要求
- **加载速度**：首屏加载时间 < 3秒
- **图片加载**：卡牌图片加载时间 < 2秒
- **操作响应**：点击响应时间 < 200ms
- **内存占用**：控制在合理范围内

### 9.3 数据存储
- **本地存储**：游戏设置、历史记录、图片缓存
- **会话存储**：当前游戏状态

## 10. 资源交付清单

### 10.1 卡牌图片资源（由产品方提供）
**龙阵营卡牌**：
- `dragon_1.png` - 龙王（1级）
- `dragon_2.png` - 神龙（2级）
- `dragon_3.png` - 金龙（3级）
- `dragon_4.png` - 青龙（4级）
- `dragon_5.png` - 赤龙（5级）
- `dragon_6.png` - 白龙（6级）
- `dragon_7.png` - 风雨龙（7级）
- `dragon_8.png` - 变形龙（8级）

**虎阵营卡牌**：
- `tiger_1.png` - 虎王（1级）
- `tiger_2.png` - 东北虎（2级）
- `tiger_3.png` - 大头虎（3级）
- `tiger_4.png` - 下山虎（4级）
- `tiger_5.png` - 壕虎（5级）
- `tiger_6.png` - 妖虎（6级）
- `tiger_7.png` - 白虎（7级）
- `tiger_8.png` - 小王虎（8级）

**通用资源**：
- `card_back.png` - 卡牌背面

### 10.2 图片规格标准
- **格式**：PNG（推荐）或JPG
- **尺寸**：建议300x300px至512x512px
- **文件大小**：单张图片不超过100KB
- **背景**：PNG格式支持透明背景

## 11. 开发优先级

### 11.1 MVP功能（第一版本）
1. 基础游戏逻辑实现
2. 图片资源加载系统
3. 人机对战功能
4. 猜拳决定先手
5. 基础UI界面
6. 移动端适配

### 11.2 后续版本功能
1. 在线对战功能
2. 分享邀请机制
3. 游戏统计功能
4. 音效和动画优化
5. 游戏难度选择

## 12. 验收标准

### 12.1 功能验收
- [ ] 游戏规则完全按照需求实现
- [ ] 卡牌图片正确显示和加载
- [ ] AI对手能够正常进行游戏
- [ ] 所有交互操作响应正常
- [ ] 胜负判定逻辑正确
- [ ] 移动端操作体验良好

### 12.2 性能验收
- [ ] 在主流手机浏览器中正常运行
- [ ] 图片加载流畅，无明显延迟
- [ ] 游戏流畅度满足要求
- [ ] 内存使用合理

### 12.3 用户体验验收
- [ ] 界面美观，卡牌图片清晰
- [ ] 操作逻辑清晰，易于上手
- [ ] 游戏节奏合适，具有趣味性
- [ ] 视觉效果符合预期

---

**文档版本**：v1.1  
**创建日期**：2025年8月22日  
**最后更新**：2025年8月22日  
**更新内容**：修改卡牌等级设定，添加图片资源需求
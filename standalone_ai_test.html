<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç‹¬ç«‹AIæµ‹è¯•</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            background: #1a1a2e; 
            color: white; 
            padding: 20px; 
        }
        .container { 
            max-width: 800px; 
            margin: 0 auto; 
        }
        .btn { 
            background: #0f4c75; 
            color: white; 
            border: none; 
            padding: 12px 24px; 
            margin: 5px; 
            cursor: pointer; 
            border-radius: 5px;
            font-size: 14px;
        }
        .btn:hover { background: #3282b8; }
        .log { 
            background: #16213e; 
            padding: 15px; 
            border-radius: 5px; 
            height: 500px; 
            overflow-y: auto; 
            font-family: monospace; 
            font-size: 13px;
            margin-top: 15px;
            border: 1px solid #0f4c75;
        }
        .error { color: #ff6b6b; }
        .success { color: #4ecdc4; }
        .warning { color: #ffe66d; }
        .info { color: #a8dadc; }
        .important { 
            background: #2a2a3e; 
            padding: 15px; 
            border-radius: 8px; 
            margin: 15px 0; 
            border-left: 4px solid #3282b8;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”§ ç‹¬ç«‹AIè¯Šæ–­å·¥å…·</h1>
        
        <div class="important">
            <h3>âš ï¸ æ¨¡å—å¯¼å…¥é—®é¢˜è¯Šæ–­</h3>
            <p>æ£€æµ‹åˆ°ES6æ¨¡å—å¯¼å…¥å¤±è´¥ã€‚è¿™é€šå¸¸æ˜¯å› ä¸ºï¼š</p>
            <ul>
                <li>ç›´æ¥æ‰“å¼€HTMLæ–‡ä»¶ï¼ˆfile://åè®®ï¼‰</li>
                <li>éœ€è¦é€šè¿‡HTTPæœåŠ¡å™¨è¿è¡Œ</li>
            </ul>
        </div>
        
        <button class="btn" onclick="checkEnvironment()">æ£€æŸ¥è¿è¡Œç¯å¢ƒ</button>
        <button class="btn" onclick="testGameAccess()">æµ‹è¯•æ¸¸æˆè®¿é—®</button>
        <button class="btn" onclick="provideSolution()">æä¾›è§£å†³æ–¹æ¡ˆ</button>
        <button class="btn" onclick="clearLog()">æ¸…é™¤æ—¥å¿—</button>
        
        <div class="log" id="log"></div>
    </div>
    
    <script>
        function log(msg, type = 'info') {
            const logEl = document.getElementById('log');
            const time = new Date().toLocaleTimeString();
            const div = document.createElement('div');
            div.className = type;
            div.innerHTML = `<span style="color: #666">[${time}]</span> ${msg}`;
            logEl.appendChild(div);
            logEl.scrollTop = logEl.scrollHeight;
        }
        
        function checkEnvironment() {
            log('ğŸ” å¼€å§‹ç¯å¢ƒæ£€æŸ¥...', 'info');
            
            // æ£€æŸ¥åè®®
            const protocol = window.location.protocol;
            log(`ğŸ“‹ å½“å‰åè®®: ${protocol}`, 'info');
            
            if (protocol === 'file:') {
                log('âŒ æ£€æµ‹åˆ° file:// åè®®', 'error');
                log('âš ï¸ ES6 æ¨¡å—åœ¨ file:// åè®®ä¸‹æ— æ³•å·¥ä½œ', 'warning');
                log('ğŸ’¡ éœ€è¦ä½¿ç”¨ HTTP æœåŠ¡å™¨è¿è¡Œ', 'warning');
            } else if (protocol === 'http:' || protocol === 'https:') {
                log('âœ… HTTP/HTTPS åè®®æ­£å¸¸', 'success');
            }
            
            // æ£€æŸ¥å½“å‰URL
            log(`ğŸ“ å½“å‰URL: ${window.location.href}`, 'info');
            
            // æ£€æŸ¥æ˜¯å¦æ”¯æŒES6æ¨¡å—
            const supportsModules = 'noModule' in document.createElement('script');
            log(`ğŸ“¦ ES6æ¨¡å—æ”¯æŒ: ${supportsModules ? 'âœ… æ”¯æŒ' : 'âŒ ä¸æ”¯æŒ'}`, supportsModules ? 'success' : 'error');
            
            // æ£€æŸ¥æµè§ˆå™¨
            log(`ğŸŒ ç”¨æˆ·ä»£ç†: ${navigator.userAgent}`, 'info');
        }
        
        function testGameAccess() {
            log('ğŸ® æµ‹è¯•æ¸¸æˆæ–‡ä»¶è®¿é—®...', 'info');
            
            // æµ‹è¯•ä¸»é¡µé¢æ˜¯å¦å¯è®¿é—®
            const gameUrl = './index.html';
            
            fetch(gameUrl)
                .then(response => {
                    if (response.ok) {
                        log('âœ… ä¸»æ¸¸æˆé¡µé¢å¯è®¿é—®', 'success');
                        log(`ğŸ“Š çŠ¶æ€ç : ${response.status}`, 'info');
                    } else {
                        log(`âŒ ä¸»æ¸¸æˆé¡µé¢è®¿é—®å¤±è´¥: ${response.status}`, 'error');
                    }
                })
                .catch(error => {
                    log(`âŒ æ— æ³•è®¿é—®ä¸»æ¸¸æˆé¡µé¢: ${error.message}`, 'error');
                    
                    if (window.location.protocol === 'file:') {
                        log('ğŸ”§ è¿™æ˜¯å› ä¸º file:// åè®®çš„é™åˆ¶', 'warning');
                    }
                });
        }
        
        function provideSolution() {
            log('ğŸ’¡ æä¾›è§£å†³æ–¹æ¡ˆ...', 'info');
            log('', 'info');
            log('ğŸš€ è§£å†³ ES6 æ¨¡å—å¯¼å…¥é—®é¢˜çš„æ–¹æ³•:', 'success');
            log('', 'info');
            
            log('æ–¹æ³•1: ä½¿ç”¨æœ¬åœ°HTTPæœåŠ¡å™¨', 'success');
            log('  â–¸ Python: python -m http.server 8000', 'info');
            log('  â–¸ Node.js: npx http-server', 'info');
            log('  â–¸ PHP: php -S localhost:8000', 'info');
            log('  â–¸ ç„¶åè®¿é—®: http://localhost:8000', 'info');
            log('', 'info');
            
            log('æ–¹æ³•2: ä½¿ç”¨Live Server (æ¨è)', 'success');
            log('  â–¸ VS Code: å®‰è£…Live Serveræ’ä»¶', 'info');
            log('  â–¸ å³é”®HTMLæ–‡ä»¶ -> Open with Live Server', 'info');
            log('', 'info');
            
            log('æ–¹æ³•3: ä½¿ç”¨åœ¨çº¿ç¯å¢ƒ', 'success');
            log('  â–¸ å°†é¡¹ç›®ä¸Šä¼ åˆ° GitHub Pages', 'info');
            log('  â–¸ æˆ–ä½¿ç”¨ CodePenã€JSFiddle ç­‰', 'info');
            log('', 'info');
            
            log('ğŸ¯ æ¨èæ“ä½œæ­¥éª¤:', 'warning');
            log('  1. åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰“å¼€ç»ˆç«¯', 'info');
            log('  2. è¿è¡Œ: python -m http.server 8000', 'info');
            log('  3. æµè§ˆå™¨è®¿é—®: http://localhost:8000', 'info');
            log('  4. æ‰“å¼€ index.html å¼€å§‹æ¸¸æˆ', 'info');
            log('  5. æˆ–æ‰“å¼€ ai_fix_test.html è¿›è¡ŒAIæµ‹è¯•', 'info');
        }
        
        function clearLog() {
            document.getElementById('log').innerHTML = '';
            log('ğŸ“ æ—¥å¿—å·²æ¸…é™¤', 'info');
        }
        
        // é¡µé¢åŠ è½½åè‡ªåŠ¨æ£€æŸ¥ç¯å¢ƒ
        setTimeout(() => {
            log('ğŸš€ ç‹¬ç«‹AIè¯Šæ–­å·¥å…·å·²åŠ è½½', 'info');
            log('', 'info');
            
            if (window.location.protocol === 'file:') {
                log('âš ï¸ æ£€æµ‹åˆ°æ‚¨æ­£åœ¨ä½¿ç”¨ file:// åè®®', 'warning');
                log('ğŸ’¡ è¿™ä¼šå¯¼è‡´ ES6 æ¨¡å—æ— æ³•åŠ è½½', 'warning');
                log('ğŸ”§ è¯·ç‚¹å‡»"æä¾›è§£å†³æ–¹æ¡ˆ"è·å–è§£å†³æ–¹æ³•', 'warning');
            } else {
                log('âœ… è¿è¡Œç¯å¢ƒæ­£å¸¸ï¼Œå¯ä»¥è¿›è¡ŒAIæµ‹è¯•', 'success');
            }
            
            checkEnvironment();
        }, 500);
    </script>
</body>
</html>